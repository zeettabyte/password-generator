<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Password Generator</title>
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-dark text-light">

  <div class="container py-5">
    <h1 class="mb-4 text-center">Secure Password Generator</h1>

    <div class="card p-4 shadow-sm bg-secondary bg-opacity-25 rounded">
      <div class="mb-3">
        <label for="length" class="form-label">Password Length: <span id="lengthValue">12</span></label>
        <input type="range" class="form-range" min="8" max="32" value="12" id="length" />
      </div>

      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="uppercase" checked />
        <label class="form-check-label" for="uppercase">Include Uppercase Letters (A-Z)</label>
      </div>

      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="lowercase" checked />
        <label class="form-check-label" for="lowercase">Include Lowercase Letters (a-z)</label>
      </div>

      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="numbers" checked />
        <label class="form-check-label" for="numbers">Include Numbers (0-9)</label>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" value="" id="symbols" />
        <label class="form-check-label" for="symbols">Include Symbols (!@#$%^&*)</label>
      </div>

      <button id="generateBtn" class="btn btn-primary w-100 mb-3">Generate Password</button>

      <div>
        <label for="result" class="form-label">Generated Password:</label>
        <textarea id="result" class="form-control" rows="3" readonly></textarea>
      </div>

      <button id="copyBtn" class="btn btn-outline-light mt-3 w-100" disabled>Copy to Clipboard</button>
    </div>
  </div>

  <!-- Bootstrap Bundle with Popper (for Bootstrap JS if needed) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const lengthInput = document.getElementById('length');
    const lengthValue = document.getElementById('lengthValue');
    const uppercaseCheckbox = document.getElementById('uppercase');
    const lowercaseCheckbox = document.getElementById('lowercase');
    const numbersCheckbox = document.getElementById('numbers');
    const symbolsCheckbox = document.getElementById('symbols');
    const generateBtn = document.getElementById('generateBtn');
    const resultTextarea = document.getElementById('result');
    const copyBtn = document.getElementById('copyBtn');

    lengthInput.addEventListener('input', () => {
      lengthValue.textContent = lengthInput.value;
    });

    function getRandomCharFrom(str) {
      return str[Math.floor(Math.random() * str.length)];
    }

    function generatePassword(length, options) {
      const upperChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const lowerChars = 'abcdefghijklmnopqrstuvwxyz';
      const numberChars = '0123456789';
      const symbolChars = '!@#$%^&*()_+[]{}|;:,.<>?';

      let allChars = '';
      if (options.uppercase) allChars += upperChars;
      if (options.lowercase) allChars += lowerChars;
      if (options.numbers) allChars += numberChars;
      if (options.symbols) allChars += symbolChars;

      if (!allChars) return '';

      // Ensure password includes at least one of each selected type
      let password = '';

      const requiredChars = [];
      if (options.uppercase) requiredChars.push(getRandomCharFrom(upperChars));
      if (options.lowercase) requiredChars.push(getRandomCharFrom(lowerChars));
      if (options.numbers) requiredChars.push(getRandomCharFrom(numberChars));
      if (options.symbols) requiredChars.push(getRandomCharFrom(symbolChars));

      // Start with required chars
      password += requiredChars.join('');

      // Fill rest of password length
      for (let i = password.length; i < length; i++) {
        password += getRandomCharFrom(allChars);
      }

      // Shuffle password to avoid predictable sequences
      return password
        .split('')
        .sort(() => Math.random() - 0.5)
        .join('');
    }

    generateBtn.addEventListener('click', () => {
      const length = parseInt(lengthInput.value);
      const options = {
        uppercase: uppercaseCheckbox.checked,
        lowercase: lowercaseCheckbox.checked,
        numbers: numbersCheckbox.checked,
        symbols: symbolsCheckbox.checked,
      };

      const password = generatePassword(length, options);
      resultTextarea.value = password;

      copyBtn.disabled = password.length === 0;
    });

    copyBtn.addEventListener('click', () => {
      if (!resultTextarea.value) return;

      navigator.clipboard.writeText(resultTextarea.value)
        .then(() => {
          copyBtn.textContent = 'Copied!';
          setTimeout(() => (copyBtn.textContent = 'Copy to Clipboard'), 2000);
        })
        .catch(() => {
          alert('Failed to copy password.');
        });
    });
  </script>
</body>
</html>